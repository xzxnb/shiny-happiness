# torch-spline-conv 预编译安装指南

## 概述
本指南将帮助您在不使用Visual Studio的情况下安装torch-spline-conv的预编译版本。

## 方法1：使用PowerShell脚本（推荐）

1. 打开PowerShell（以管理员身份运行）
2. 导航到项目目录
3. 运行以下命令：
```powershell
.\install_torch_spline_conv.ps1
```

## 方法2：使用批处理脚本

1. 双击运行 `install_torch_spline_conv.bat`
2. 或者命令行运行：
```cmd
install_torch_spline_conv.bat
```

## 方法3：手动命令行安装

### 步骤1：检查环境
```bash
# 检查Python版本
python --version

# 检查PyTorch版本和CUDA支持
python -c "import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDA: {torch.cuda.is_available()}')"
```

### 步骤2：安装预编译版本

#### CPU版本（推荐用于大多数情况）
```bash
pip install https://data.pyg.org/whl/torch-1.12.0+cpu/torch_spline_conv-1.2.1+pt112cpu-cp38-cp38-win_amd64.whl
```

#### CUDA版本（如果您有NVIDIA GPU）
```bash
# CUDA 11.6
pip install https://data.pyg.org/whl/torch-1.12.0+cu116/torch_spline_conv-1.2.1+pt112cu116-cp38-cp38-win_amd64.whl

# CUDA 11.7
pip install https://data.pyg.org/whl/torch-1.12.0+cu117/torch_spline_conv-1.2.1+pt112cu117-cp38-cp38-win_amd64.whl
```

## 方法4：使用Python脚本

```bash
python install_torch_spline_conv.py
```

## 验证安装

安装完成后，验证安装是否成功：

```python
import torch_spline_conv
print(f"torch-spline-conv版本: {torch_spline_conv.__version__}")

# 测试基本功能
import torch
from torch_spline_conv import SplineConv

# 创建一个简单的测试
x = torch.randn(10, 16)
edge_index = torch.randint(0, 10, (2, 20))
conv = SplineConv(16, 32, dim=1, kernel_size=25)
out = conv(x, edge_index)
print("测试成功！输出形状:", out.shape)
```

## 常见问题解决

### 问题1：网络连接问题
如果下载失败，可以：
1. 使用VPN或代理
2. 手动下载wheel文件并本地安装
3. 尝试使用国内镜像源

### 问题2：版本不匹配
确保您的PyTorch版本与wheel包匹配：
- PyTorch 1.12.0 → 使用对应的wheel包
- Python 3.8 → 使用cp38版本

### 问题3：CUDA版本不匹配
检查您的CUDA版本：
```bash
nvidia-smi
```
然后选择对应的wheel包。

## 手动下载wheel包

如果自动安装失败，您可以：

1. 访问 https://data.pyg.org/whl/
2. 选择对应的PyTorch版本目录
3. 下载对应的wheel文件
4. 本地安装：
```bash
pip install torch_spline_conv-1.2.1+pt112cpu-cp38-cp38-win_amd64.whl
```

## 注意事项

1. **不需要Visual Studio**：使用预编译版本完全避免了编译需求
2. **版本兼容性**：确保PyTorch、Python和wheel包版本匹配
3. **网络要求**：需要稳定的网络连接下载wheel包
4. **权限要求**：某些情况下可能需要管理员权限

## 成功标志

安装成功后，您应该能够：
- 导入 `torch_spline_conv` 模块
- 使用 `SplineConv` 类
- 在您的GNN项目中使用该库

如果遇到任何问题，请检查错误信息并参考上述解决方案。

